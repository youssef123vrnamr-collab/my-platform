<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فلك | منصة تعلم علم الفلك</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #0f3460;
            --highlight: #e94560;
            --star: #ffd700;
            --text: #eaeaea;
            --text-muted: #a0a0a0;
            --success: #4ade80;
            --warning: #fbbf24;
            --purple: #8b5cf6;
            --danger: #ef4444;
            --info: #3b82f6;
            --youtube: #ff0000;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0c0c1d 0%, #1a1a2e 50%, #16213e 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 46, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 5000;
            gap: 1rem;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--accent);
            border-top-color: var(--purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-bottom: 1px solid rgba(233, 69, 96, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--star);
            text-decoration: none;
        }

        .logo i { color: var(--highlight); }

        .nav-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-badge {
            background: var(--success);
            color: #064e3b;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 700;
            display: none;
        }

        .user-badge.active { display: block; }

        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--highlight), #ff6b6b);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.6);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--accent);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #22c55e);
            color: white;
            box-shadow: 0 4px 15px rgba(74, 222, 128, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #f59e0b);
            color: #1f2937;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.6);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info), #2563eb);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }

        .btn-info:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6);
        }

        .btn-upload {
            background: linear-gradient(135deg, var(--purple), #7c3aed);
            color: white;
            font-size: 1.2rem;
            padding: 1rem 3rem;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .btn-upload:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.7);
        }

        .btn-delete-all {
            background: linear-gradient(135deg, #7c2d12, #9a3412);
            color: #fdba74;
            border: 2px solid #c2410c;
            font-size: 0.9rem;
            padding: 0.7rem 1.5rem;
        }

        .btn-delete-all:hover {
            background: linear-gradient(135deg, #9a3412, #c2410c);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(154, 52, 18, 0.5);
        }

        .btn-share {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            color: white;
            border: 2px solid #38bdf8;
            font-size: 0.9rem;
            padding: 0.7rem 1.5rem;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(14, 165, 233, 0.5); }
            50% { box-shadow: 0 0 20px rgba(14, 165, 233, 0.8), 0 0 30px rgba(14, 165, 233, 0.4); }
        }

        .btn-share:hover {
            background: linear-gradient(135deg, #0284c7, #0369a1);
            transform: translateY(-2px);
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            font-size: 1.1rem;
            padding: 1rem 2rem;
        }

        .btn-whatsapp:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.6);
        }

        .btn-youtube {
            background: linear-gradient(135deg, #ff0000, #cc0000);
            color: white;
            font-size: 1.1rem;
            padding: 1rem 2rem;
        }

        .btn-youtube:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.5);
        }

        .btn-login-nav {
            background: linear-gradient(135deg, var(--star), #f59e0b);
            color: #1f2937;
            font-size: 0.9rem;
            padding: 0.6rem 1.2rem;
        }

        .main-container {
            margin-top: 80px;
            padding: 2rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            z-index: 1;
        }

        .hero {
            text-align: center;
            padding: 3rem 2rem;
            background: radial-gradient(ellipse at center, rgba(233, 69, 96, 0.1) 0%, transparent 70%);
            border-radius: 30px;
            margin-bottom: 2rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--star), var(--highlight));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .admin-banner {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.2));
            border: 3px dashed var(--purple);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 3rem;
            display: none;
        }

        .admin-banner.active {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-banner i {
            font-size: 3rem;
            color: var(--purple);
            margin-bottom: 1rem;
        }

        .admin-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .public-banner {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(34, 197, 94, 0.1));
            border: 2px solid var(--success);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .public-banner h3 {
            color: var(--success);
            margin-bottom: 0.5rem;
        }

        .public-banner p {
            color: var(--text-muted);
        }

        .videos-section {
            margin-bottom: 3rem;
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--star);
        }

        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        .video-card {
            background: linear-gradient(145deg, var(--secondary), var(--primary));
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s;
            border: 2px solid rgba(139, 92, 246, 0.3);
            cursor: pointer;
            position: relative;
        }

        .video-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), 0 0 30px rgba(139, 92, 246, 0.3);
            border-color: var(--purple);
        }

        .video-thumbnail {
            position: relative;
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #1e1b4b, #312e81);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-icon {
            font-size: 5rem;
            opacity: 0.8;
        }

        .video-icon.youtube {
            color: var(--youtube);
        }

        .video-icon.drive {
            color: var(--purple);
        }

        .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s;
        }

        .video-card:hover .play-overlay { opacity: 1; }

        .play-btn {
            width: 70px;
            height: 70px;
            background: rgba(139, 92, 246, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.8);
            transition: all 0.3s;
        }

        .play-btn:hover {
            transform: scale(1.1);
            background: var(--highlight);
        }

        .video-duration {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 0.3rem 0.8rem;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .source-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .source-badge.youtube {
            background: rgba(255, 0, 0, 0.9);
            color: white;
        }

        .source-badge.drive {
            background: rgba(139, 92, 246, 0.9);
            color: white;
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
            background: rgba(239, 68, 68, 0.9);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            opacity: 0;
            transition: all 0.3s;
            z-index: 10;
        }

        .video-card:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .video-info { padding: 1.5rem; }

        .video-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .video-desc {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .video-stats {
            display: flex;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .modal.active { display: flex; }

        .modal-content {
            background: linear-gradient(145deg, var(--secondary), var(--primary));
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid rgba(139, 92, 246, 0.5);
            animation: slideUp 0.3s ease;
        }

        .modal-content.wide {
            max-width: 700px;
        }

        .modal-content.player {
            max-width: 900px;
            border: 2px solid var(--purple);
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover { color: var(--highlight); transform: rotate(90deg); }

        .modal-body { padding: 1.5rem; }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 700;
            color: var(--star);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--accent);
            border-radius: 12px;
            background: rgba(15, 52, 96, 0.3);
            color: var(--text);
            font-family: 'Cairo', sans-serif;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--purple);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
        }

        .source-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .source-option {
            flex: 1;
            padding: 1.5rem;
            border: 3px solid var(--accent);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(15, 52, 96, 0.2);
        }

        .source-option:hover {
            border-color: var(--purple);
            background: rgba(139, 92, 246, 0.1);
        }

        .source-option.active {
            border-color: var(--success);
            background: rgba(74, 222, 128, 0.1);
        }

        .source-option i {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .source-option.youtube i {
            color: var(--youtube);
        }

        .source-option.drive i {
            color: var(--purple);
        }

        .password-section {
            background: rgba(233, 69, 96, 0.1);
            border: 2px solid var(--highlight);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .password-section h3 {
            color: var(--highlight);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .danger-section {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid var(--danger);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .danger-section h3 {
            color: var(--danger);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-section {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid var(--info);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .info-section h3 {
            color: var(--info);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .warning-box {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid var(--warning);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            color: var(--warning);
            font-size: 0.9rem;
        }

        .warning-box i {
            margin-left: 0.5rem;
        }

        .success-box {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid var(--success);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            color: var(--success);
            font-size: 0.9rem;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--highlight);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            z-index: 3000;
            opacity: 0;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.5);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .empty-state {
            text-align: center;
            padding: 4rem;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            color: var(--accent);
        }

        .share-link-box {
            background: rgba(15, 52, 96, 0.5);
            border: 2px solid var(--accent);
            border-radius: 15px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .link-display {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--accent);
            border-radius: 10px;
            padding: 0.8rem 1.2rem;
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--success);
            word-break: break-all;
            flex: 1;
            min-width: 250px;
            text-align: left;
            direction: ltr;
        }

        .help-text {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid var(--success);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .help-text i {
            color: var(--success);
            margin-left: 0.5rem;
        }

        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 768px) {
            .navbar { padding: 1rem; }
            .hero h1 { font-size: 2rem; }
            .videos-grid { grid-template-columns: 1fr; }
            .btn-upload { font-size: 1rem; padding: 0.8rem 2rem; }
            .admin-controls { flex-direction: column; align-items: center; }
            .share-link-box { flex-direction: column; }
            .link-display { width: 100%; text-align: center; }
            .source-selector { flex-direction: column; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loadingScreen">
        <div class="loading-spinner"></div>
        <p>جاري تحميل الفيديوهات...</p>
    </div>

    <div class="stars" id="stars"></div>

    <nav class="navbar">
        <a href="#" class="logo">
            <i class="fas fa-star"></i>
            فلك
        </a>

        <div class="nav-actions">
            <span class="user-badge" id="userBadge">✓ مسجل الدخول</span>
            <button class="btn btn-login-nav" id="loginBtn" onclick="openModal('authModal')">
                <i class="fas fa-lock"></i>
                دخول المشرف
            </button>
            <button class="btn btn-secondary" id="logoutBtn" style="display: none;" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                خروج
            </button>
        </div>
    </nav>

    <div class="main-container">
        <section class="hero">
            <h1>اكتشف أسرار الكون</h1>
            <p>منصة عربية متخصصة لتعلم علم الفلك والفضاء</p>
        </section>

        <!-- Public Welcome Banner -->
        <div class="public-banner" id="publicBanner">
            <h3><i class="fas fa-globe"></i> منصة مفتوحة للجميع</h3>
            <p>جميع الفيديوهات متاحة للمشاهدة المباشرة من YouTube وGoogle Drive</p>
        </div>

        <!-- Admin Banner (Visible after login) -->
        <div class="admin-banner" id="adminBanner">
            <i class="fas fa-cog"></i>
            <h2 style="margin-bottom: 1rem;">لوحة تحكم المشرف</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-muted);">إدارة الفيديوهات والمنصة</p>
            
            <div class="admin-controls">
                <button class="btn btn-upload" onclick="openUploadPasswordModal()">
                    <i class="fas fa-plus-circle"></i>
                    إضافة فيديو
                </button>
                <button class="btn btn-share" onclick="openShareModal()">
                    <i class="fas fa-share-alt"></i>
                    نسخ رابط المنصة
                </button>
                <button class="btn btn-delete-all" onclick="openDeleteAllModal()">
                    <i class="fas fa-trash-alt"></i>
                    مسح كل الفيديوهات
                </button>
            </div>
        </div>

        <!-- Videos Section -->
        <div class="videos-section" id="videosSection">
            <h2 class="section-title"><i class="fas fa-video"></i> الفيديوهات التعليمية</h2>
            <div class="videos-grid" id="videosGrid"></div>
            <div class="empty-state" id="emptyState" style="display: none;">
                <i class="fas fa-video-slash"></i>
                <h2>لا توجد فيديوهات حالياً</h2>
                <p style="margin-top: 1rem;">سيتم إضافة محتوى قريباً!</p>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user-shield"></i> دخول المشرف</h2>
                <button class="close-btn" onclick="closeModal('authModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body" id="authStep1">
                <div class="form-group">
                    <label>الاسم الكامل *</label>
                    <input type="text" id="userName" placeholder="محمد أحمد">
                </div>
                <div class="form-group">
                    <label>رقم الهاتف *</label>
                    <input type="tel" id="userPhone" placeholder="01xxxxxxxxx">
                </div>
                <button class="btn btn-primary" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="submitData()">
                    <i class="fas fa-paper-plane"></i>
                    إرسال البيانات للمشرف
                </button>
            </div>

            <div class="modal-body" id="authStep2" style="display: none;">
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <i class="fas fa-key" style="font-size: 4rem; color: var(--success);"></i>
                    <h3 style="margin-top: 1rem;">أدخل كود الدخول</h3>
                    <p style="color: var(--text-muted);">تواصل مع المشرف للحصول على الكود</p>
                </div>

                <div class="form-group">
                    <input type="text" id="tokenInput" placeholder="اكتب الكود هنا..." style="text-align: center; font-size: 1.3rem; letter-spacing: 3px;">
                </div>

                <button class="btn btn-success" style="width: 100%; padding: 1rem; margin-bottom: 0.5rem; font-size: 1.1rem;" onclick="verifyToken()">
                    <i class="fas fa-unlock"></i>
                    دخول المشرف
                </button>

                <button class="btn btn-secondary" style="width: 100%; padding: 1rem;" onclick="backToStep1()">
                    رجوع
                </button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-content wide">
            <div class="modal-header">
                <h2 style="color: #38bdf8;"><i class="fas fa-share-alt"></i> مشاركة المنصة</h2>
                <button class="close-btn" onclick="closeModal('shareModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="success-box">
                    <i class="fas fa-check-circle"></i>
                    <strong>المنصة جاهزة للمشاركة!</strong> انسخ الرابط وأرسله لمن تريد
                </div>

                <div class="info-section">
                    <h3><i class="fas fa-link"></i> رابط المنصة المباشر</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">هذا الرابط يعمل للجميع - لا يحتاج تسجيل دخول</p>
                    
                    <div class="share-link-box" style="margin-bottom: 0;">
                        <div class="link-display" id="modalPlatformLink"></div>
                        <button class="btn btn-info" onclick="copyLinkFromModal()">
                            <i class="fas fa-copy"></i>
                            نسخ
                        </button>
                    </div>
                </div>

                <div style="text-align: center;">
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">شارك مباشرة عبر:</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-whatsapp" onclick="shareViaWhatsAppFromModal()">
                            <i class="fab fa-whatsapp"></i>
                            واتساب
                        </button>
                        <button class="btn btn-primary" onclick="shareViaEmail()">
                            <i class="fas fa-envelope"></i>
                            إيميل
                        </button>
                        <button class="btn btn-youtube" onclick="shareViaYouTube()">
                            <i class="fab fa-youtube"></i>
                            يوتيوب
                        </button>
                        <button class="btn btn-secondary" onclick="shareNative()">
                            <i class="fas fa-share"></i>
                            أخرى
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Password Modal -->
    <div class="modal" id="uploadPasswordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-lock"></i> تأكيد الإضافة</h2>
                <button class="close-btn" onclick="closeModal('uploadPasswordModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="password-section">
                    <h3><i class="fas fa-shield-alt"></i> حماية المحتوى</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">أدخل باسورد الإضافة الخاص بالمشرف</p>
                    <div class="form-group">
                        <input type="password" id="uploadPasswordInput" placeholder="الباسورد..." style="text-align: center;">
                    </div>
                    <button class="btn btn-warning" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="verifyUploadPassword()">
                        <i class="fas fa-check-circle"></i>
                        تأكيد وفتح
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete All Videos Modal -->
    <div class="modal" id="deleteAllModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> تنبيه خطير</h2>
                <button class="close-btn" onclick="closeModal('deleteAllModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="warning-box">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>تحذير:</strong> هذا الإجراء سيقوم بمسح جميع الفيديوهات نهائياً!
                </div>

                <div class="danger-section">
                    <h3><i class="fas fa-trash-alt"></i> تأكيد المسح الكلي</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">أدخل باسورد المسح الخاص بالمشرف</p>
                    <div class="form-group">
                        <input type="password" id="deletePasswordInput" placeholder="باسورد المسح..." style="text-align: center;">
                    </div>
                    <button class="btn btn-danger" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="verifyDeleteAll()">
                        <i class="fas fa-trash-alt"></i>
                        نعم، مسح كل الفيديوهات نهائياً
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Video Modal -->
    <div class="modal" id="uploadVideoModal">
        <div class="modal-content wide">
            <div class="modal-header">
                <h2><i class="fas fa-cloud-upload-alt"></i> إضافة فيديو جديد</h2>
                <button class="close-btn" onclick="closeModal('uploadVideoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="help-text">
                    <i class="fas fa-info-circle"></i>
                    اختر مصدر الفيديو: <strong>YouTube</strong> (أسهل) أو <strong>Google Drive</strong>
                </div>

                <!-- Source Selector -->
                <div class="source-selector">
                    <div class="source-option youtube active" onclick="selectSource('youtube')" id="youtubeOption">
                        <i class="fab fa-youtube"></i>
                        <h4>YouTube</h4>
                        <p style="font-size: 0.9rem; color: var(--text-muted);">أسهل وأسرع</p>
                    </div>
                    <div class="source-option drive" onclick="selectSource('drive')" id="driveOption">
                        <i class="fab fa-google-drive"></i>
                        <h4>Google Drive</h4>
                        <p style="font-size: 0.9rem; color: var(--text-muted);">للفيديوهات الكبيرة</p>
                    </div>
                </div>

                <!-- YouTube Input -->
                <div id="youtubeInput">
                    <div class="form-group">
                        <label>رابط فيديو YouTube *</label>
                        <input type="url" id="youtubeUrlInput" placeholder="https://www.youtube.com/watch?v=... أو https://youtu.be/...">
                    </div>
                    <div class="help-text" style="background: rgba(255, 0, 0, 0.1); border-color: var(--youtube);">
                        <i class="fab fa-youtube" style="color: var(--youtube);"></i>
                        <strong>أنواع الروابط المدعومة:</strong><br>
                        • https://www.youtube.com/watch?v=VIDEO_ID<br>
                        • https://youtu.be/VIDEO_ID<br>
                        • https://www.youtube.com/embed/VIDEO_ID
                    </div>
                </div>

                <!-- Google Drive Input -->
                <div id="driveInput" style="display: none;">
                    <div class="form-group">
                        <label>رابط مشاركة Google Drive *</label>
                        <input type="url" id="driveUrlInput" placeholder="https://drive.google.com/file/d/.../view?usp=sharing">
                    </div>
                    <div class="help-text">
                        <i class="fas fa-info-circle"></i>
                        <strong>خطوات المشاركة:</strong><br>
                        1. اضغط كليك يمين على الفيديو ← "Share"<br>
                        2. غير الإعدادات لـ "Anyone with the link can view"<br>
                        3. انسخ الرابط والصقه هنا
                    </div>
                </div>

                <div class="form-group">
                    <label>عنوان الفيديو *</label>
                    <input type="text" id="videoTitleInput" placeholder="مثال: رحلة إلى كوكب المريخ">
                </div>

                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="videoDesc" rows="3" placeholder="اكتب وصفاً مختصراً عن الفيديو..."></textarea>
                </div>

                <button class="btn btn-success" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="addVideo()">
                    <i class="fas fa-plus-circle"></i>
                    إضافة الفيديو للمنصة
                </button>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div class="modal" id="playerModal">
        <div class="modal-content player">
            <div class="modal-header">
                <h2 id="playerTitle">عنوان الفيديو</h2>
                <button class="close-btn" onclick="closePlayer()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="padding: 0;">
                <div class="video-container">
                    <iframe id="videoPlayer" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
                </div>
                <div style="padding: 1.5rem;">
                    <p id="playerDesc" style="color: var(--text-muted); font-size: 1.1rem;"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // ==========================================
        // Firebase Configuration
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyDnAxBiQwtBcg5zmfrNJIbip8KbYuatKVs",
            authDomain: "falak-platform-f7820.firebaseapp.com",
            projectId: "falak-platform-f7820",
            storageBucket: "falak-platform-f7820.firebasestorage.app",
            messagingSenderId: "444745901846",
            appId: "1:444745901846:web:d4afe2bc547b86fdac1237"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ==========================================
        // إعدادات المنصة
        // ==========================================
        const PLATFORM_URL = window.location.href;
        const ACCESS_TOKEN = "@@@&&&((()))";
        const UPLOAD_PASSWORD = "1#3_5-7(9/0";
        const DELETE_PASSWORD = "del@123#all";
        const ADMIN_PHONE = "201553229226";

        let videos = [];
        let isAdmin = false;
        let currentUser = null;
        let selectedSource = 'youtube';

        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            loadVideos();
            checkAdminStatus();
        });

        function createStars() {
            const container = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(star);
            }
        }

        // ==========================================
        // تحميل الفيديوهات من Firebase Firestore
        // ==========================================
        function loadVideos() {
            document.getElementById('loadingScreen').style.display = 'flex';
            
            // الاستماع للتغييرات في الوقت الحقيقي
            db.collection('videos')
                .orderBy('created_at', 'desc')
                .onSnapshot((snapshot) => {
                    videos = [];
                    snapshot.forEach((doc) => {
                        const video = doc.data();
                        video.firestoreId = doc.id; // حفظ معرف Firestore
                        videos.push(video);
                    });
                    renderVideos();
                    document.getElementById('loadingScreen').style.display = 'none';
                }, (error) => {
                    console.error('Error loading videos:', error);
                    showToast('❌ خطأ في تحميل الفيديوهات');
                    document.getElementById('loadingScreen').style.display = 'none';
                });
        }

        function renderVideos() {
            const grid = document.getElementById('videosGrid');
            const empty = document.getElementById('emptyState');

            if (videos.length === 0) {
                grid.style.display = 'none';
                empty.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            empty.style.display = 'none';

            grid.innerHTML = videos.map((v, i) => {
                const isYouTube = v.source === 'youtube';
                const iconClass = isYouTube ? 'youtube fa-youtube' : 'drive fa-google-drive';
                const badgeClass = isYouTube ? 'youtube' : 'drive';
                const sourceText = isYouTube ? 'YouTube' : 'Drive';
                const dateStr = v.created_at ? new Date(v.created_at).toLocaleDateString('ar-EG') : '';
                
                return `
                <div class="video-card" onclick="playVideo(${i})">
                    <div class="video-thumbnail">
                        <i class="fab ${iconClass} video-icon ${isYouTube ? 'youtube' : 'drive'}"></i>
                        <div class="play-overlay">
                            <div class="play-btn">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                        <div class="video-duration">
                            <i class="fas fa-play-circle"></i> تشغيل
                        </div>
                        <div class="source-badge ${badgeClass}">
                            <i class="fab ${isYouTube ? 'fa-youtube' : 'fa-google-drive'}"></i>
                            ${sourceText}
                        </div>
                    </div>
                    ${isAdmin ? `
                    <button class="delete-btn" onclick="deleteVideo(${i}, event)" title="مسح الفيديو">
                        <i class="fas fa-trash"></i>
                    </button>
                    ` : ''}
                    <div class="video-info">
                        <h3 class="video-title">${v.title}</h3>
                        <p class="video-desc">${v.description || 'لا يوجد وصف'}</p>
                        <div class="video-stats">
                            <span><i class="fas fa-calendar-alt"></i> ${dateStr}</span>
                            <span><i class="fas fa-user"></i> ${v.author || 'مشرف'}</span>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        function checkAdminStatus() {
            const savedUser = localStorage.getItem('falak_admin');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                isAdmin = true;
                showAdminUI();
            } else {
                showPublicUI();
            }
        }

        function showAdminUI() {
            document.getElementById('userBadge').classList.add('active');
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'inline-flex';
            document.getElementById('adminBanner').classList.add('active');
            document.getElementById('publicBanner').style.display = 'none';
            renderVideos();
        }

        function showPublicUI() {
            document.getElementById('userBadge').classList.remove('active');
            document.getElementById('loginBtn').style.display = 'inline-flex';
            document.getElementById('logoutBtn').style.display = 'none';
            document.getElementById('adminBanner').classList.remove('active');
            document.getElementById('publicBanner').style.display = 'block';
        }

        function selectSource(source) {
            selectedSource = source;
            document.getElementById('youtubeOption').classList.toggle('active', source === 'youtube');
            document.getElementById('driveOption').classList.toggle('active', source === 'drive');
            document.getElementById('youtubeInput').style.display = source === 'youtube' ? 'block' : 'none';
            document.getElementById('driveInput').style.display = source === 'drive' ? 'block' : 'none';
        }

        function extractYouTubeId(url) {
            const patterns = [
                /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
                /^([a-zA-Z0-9_-]{11})$/
            ];
            for (let pattern of patterns) {
                const match = url.match(pattern);
                if (match) return match[1];
            }
            return null;
        }

        function getYouTubeEmbedUrl(videoId) {
            return `https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1`;
        }

        function extractDriveId(url) {
            const match = url.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);
            return match ? match[1] : null;
        }

        function getDriveEmbedUrl(fileId) {
            return `https://drive.google.com/file/d/${fileId}/preview`;
        }

        // ==========================================
        // حذف الفيديو من Firebase
        // ==========================================
        async function deleteVideo(index, event) {
            event.stopPropagation();
            
            if (!confirm('هل أنت متأكد من مسح هذا الفيديو؟')) return;
            
            const video = videos[index];
            if (!video.firestoreId) {
                showToast('❌ خطأ: معرف الفيديو غير موجود');
                return;
            }

            try {
                await db.collection('videos').doc(video.firestoreId).delete();
                showToast('✅ تم مسح الفيديو بنجاح');
            } catch (error) {
                console.error('Error deleting video:', error);
                showToast('❌ خطأ في مسح الفيديو');
            }
        }

        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function openShareModal() {
            document.getElementById('modalPlatformLink').textContent = PLATFORM_URL;
            openModal('shareModal');
        }

        function openUploadPasswordModal() {
            openModal('uploadPasswordModal');
            document.getElementById('uploadPasswordInput').value = '';
        }

        function openDeleteAllModal() {
            openModal('deleteAllModal');
            document.getElementById('deletePasswordInput').value = '';
        }

        function copyLinkFromModal() {
            navigator.clipboard.writeText(PLATFORM_URL).then(() => {
                showToast('✅ تم نسخ رابط المنصة!');
            }).catch(() => {
                const textArea = document.createElement("textarea");
                textArea.value = PLATFORM_URL;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                showToast('✅ تم نسخ رابط المنصة!');
            });
        }

        function shareViaWhatsAppFromModal() {
            const text = encodeURIComponent(`🌟 انضم إليّ في منصة فلك!\n\nمنصة عربية مجانية لتعلم علم الفلك والفضاء:\n\n${PLATFORM_URL}`);
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        function shareViaEmail() {
            const subject = encodeURIComponent('دعوة لزيارة منصة فلك');
            const body = encodeURIComponent(`مرحباً،\n\nأدعوك لزيارة منصة فلك:\n${PLATFORM_URL}\n\nمع تحياتي`);
            window.open(`mailto:?subject=${subject}&body=${body}`, '_blank');
        }

        function shareViaYouTube() {
            window.open(`https://www.youtube.com/redirect?q=${encodeURIComponent(PLATFORM_URL)}`, '_blank');
        }

        function shareNative() {
            if (navigator.share) {
                navigator.share({
                    title: 'منصة فلك',
                    text: 'منصة عربية مجانية لتعلم علم الفلك',
                    url: PLATFORM_URL
                }).catch(() => {
                    copyLinkFromModal();
                });
            } else {
                copyLinkFromModal();
            }
        }

        function submitData() {
            const name = document.getElementById('userName').value.trim();
            const phone = document.getElementById('userPhone').value.trim();

            if (!name || !phone) {
                showToast('الرجاء إدخال الاسم ورقم الهاتف');
                return;
            }

            currentUser = { name, phone };

            const message = encodeURIComponent(
                `🔔 طلب دخول مشرف في منصة فلك:\n\n` +
                `👤 الاسم: ${name}\n` +
                `📱 الهاتف: ${phone}\n\n` +
                `🎁 كود الدخول: ${ACCESS_TOKEN}\n\n` +
                `أرسل هذا الكود للمشرف`
            );

            window.open(`https://wa.me/${ADMIN_PHONE}?text=${message}`, '_blank');

            document.getElementById('authStep1').style.display = 'none';
            document.getElementById('authStep2').style.display = 'block';
            showToast('تم فتح واتساب - أرسل البيانات للمشرف');
        }

        function backToStep1() {
            document.getElementById('authStep1').style.display = 'block';
            document.getElementById('authStep2').style.display = 'none';
        }

        function verifyToken() {
            const input = document.getElementById('tokenInput').value.trim();

            if (input === ACCESS_TOKEN) {
                isAdmin = true;
                localStorage.setItem('falak_admin', JSON.stringify(currentUser));
                closeModal('authModal');
                showAdminUI();
                showToast('✅ مرحباً بك أيها المشرف!');
                document.getElementById('userName').value = '';
                document.getElementById('userPhone').value = '';
                document.getElementById('tokenInput').value = '';
                backToStep1();
            } else {
                showToast('❌ كود الدخول غير صحيح!');
            }
        }

        function logout() {
            isAdmin = false;
            currentUser = null;
            localStorage.removeItem('falak_admin');
            showPublicUI();
            showToast('تم تسجيل الخروج');
        }

        function verifyUploadPassword() {
            const input = document.getElementById('uploadPasswordInput').value;
            if (input === UPLOAD_PASSWORD) {
                closeModal('uploadPasswordModal');
                openModal('uploadVideoModal');
                selectSource('youtube');
                showToast('✅ يمكنك الآن إضافة الفيديوهات');
            } else {
                showToast('❌ باسورد الإضافة غير صحيح!');
            }
        }

        // ==========================================
        // مسح جميع الفيديوهات من Firebase
        // ==========================================
        async function verifyDeleteAll() {
            const input = document.getElementById('deletePasswordInput').value;
            if (input !== DELETE_PASSWORD) {
                showToast('❌ باسورد المسح غير صحيح!');
                return;
            }
            
            if (!confirm('هل أنت متأكد تماماً؟ سيتم مسح جميع الفيديوهات!')) return;
            
            try {
                const batch = db.batch();
                const snapshot = await db.collection('videos').get();
                
                snapshot.docs.forEach((doc) => {
                    batch.delete(doc.ref);
                });
                
                await batch.commit();
                showToast('✅ تم مسح جميع الفيديوهات');
                closeModal('deleteAllModal');
            } catch (error) {
                console.error('Error deleting all videos:', error);
                showToast('❌ خطأ في مسح الفيديوهات');
            }
        }

        // ==========================================
        // إضافة فيديو إلى Firebase
        // ==========================================
        async function addVideo() {
            const title = document.getElementById('videoTitleInput').value.trim();
            
            if (!title) {
                showToast('الرجاء إدخال عنوان للفيديو');
                return;
            }

            let videoData = null;

            if (selectedSource === 'youtube') {
                const url = document.getElementById('youtubeUrlInput').value.trim();
                if (!url) {
                    showToast('الرجاء إدخال رابط YouTube');
                    return;
                }

                const videoId = extractYouTubeId(url);
                if (!videoId) {
                    showToast('❌ رابط YouTube غير صحيح!');
                    return;
                }

                videoData = {
                    source: 'youtube',
                    title: title,
                    description: document.getElementById('videoDesc').value.trim(),
                    video_id: videoId,
                    embed_url: getYouTubeEmbedUrl(videoId),
                    original_url: url,
                    author: currentUser ? currentUser.name : 'مشرف',
                    created_at: firebase.firestore.FieldValue.serverTimestamp()
                };

            } else {
                const url = document.getElementById('driveUrlInput').value.trim();
                if (!url) {
                    showToast('الرجاء إدخال رابط Google Drive');
                    return;
                }

                const fileId = extractDriveId(url);
                if (!fileId) {
                    showToast('❌ رابط Google Drive غير صحيح!');
                    return;
                }

                videoData = {
                    source: 'drive',
                    title: title,
                    description: document.getElementById('videoDesc').value.trim(),
                    video_id: fileId,
                    embed_url: getDriveEmbedUrl(fileId),
                    original_url: url,
                    author: currentUser ? currentUser.name : 'مشرف',
                    created_at: firebase.firestore.FieldValue.serverTimestamp()
                };
            }

            try {
                await db.collection('videos').add(videoData);
                
                closeModal('uploadVideoModal');
                showToast('✅ تم إضافة الفيديو بنجاح!');
                
                // تفريغ الحقول
                document.getElementById('youtubeUrlInput').value = '';
                document.getElementById('driveUrlInput').value = '';
                document.getElementById('videoTitleInput').value = '';
                document.getElementById('videoDesc').value = '';
            } catch (error) {
                console.error('Error adding video:', error);
                showToast('❌ خطأ في إضافة الفيديو');
            }
        }

        function playVideo(index) {
            const v = videos[index];
            if (!v || !v.embed_url) {
                showToast('❌ خطأ في تحميل الفيديو');
                return;
            }

            document.getElementById('playerTitle').textContent = v.title;
            document.getElementById('playerDesc').textContent = v.description || '';
            document.getElementById('videoPlayer').src = v.embed_url;
            openModal('playerModal');
        }

        function closePlayer() {
            document.getElementById('videoPlayer').src = '';
            closeModal('playerModal');
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        window.onclick = function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
                if (e.target.id === 'playerModal') {
                    closePlayer();
                }
            }
        }
    </script>
</body>
</html>
